import gooeypie as gp
from pcpartpicker import API 

app = gp.GooeyPieApp("PC Part Picker")
app.width = 700
app.height = 200 
app.set_resizable(False) #dom helped me with this 

app.set_grid(2,1)
# first_page_logo = gp.Image(app, 'Term2\PCPartPicker_Logo.png')
begin_button = gp.Button(app,'Start Building', None)

# app.add(first_page_logo,1, 1 )
app.add(begin_button, 2, 1)
app.run()

def cpupage(event):
    cpupage = gp.Window(app, 'cpupage')
    
api = API()

#The following code is provided by Mr. Fong 
#First go and pull the json format

def retrieve_data_from_pc_part_picker(component):
    initial_pull = api.retrieve(component)
    remove_dictionary_wrapper = initial_pull[component]
    formatted_list = [component for component in remove_dictionary_wrapper]
    return formatted_list


#make the data python friendly :) - adjust the i.[field] to add more

def access_fields(data_set):
    small_list = []
    for i in data_set:
        small_list.append([i.brand, i.model, i.price])
    return small_list

cpu_data = retrieve_data_from_pc_part_picker("cpu")
cpu_smaller_list = access_fields(cpu_data)
cpu_smaller_list 
scpu = ("Intel") #variable for user input 
for i in cpu_smaller_list:
    if i[0] == scpu:
         stringify = str(i[2]) # convert <Money: X.XX USD> into a string, e.g. "US$X.00"
         remove_us_prefix = stringify[3:] # cut off the US$ part
         remove_us_prefix = ''.join(str(remove_us_prefix).split(',')) #inspired by stackoverflow

         floatify = float(remove_us_prefix) # convert back into a float
        

         if floatify == 0.00:
             i[2] = "item not available"
             print (i)
         else:
             print(i)
    
# print(x)
# Code by Mr. Fong 
# for i in filtered_cpu: #linear search for brands and filtering out unavailable items
#     stringify = str(i[2]) # convert <Money: X.XX USD> into a string, e.g. "US$X.00"
#     # x = len(stringify)
#     # x = x - 3
#     remove_us_prefix = stringify[3:] # cut off the US$ part
#     remove_us_prefix = ''.join(str(remove_us_prefix).split(',')) #inspired by stackoverflow

#     floatify = float(remove_us_prefix) # convert back into a float
        

#     if floatify == 0.00:
#         i[2] = "item not available"
#         print (i)
#     else:
#         print(i)
